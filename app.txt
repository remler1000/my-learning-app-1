pythonimport streamlit as st
import pandas as pd

st.title("אפליקציית מאגר ידע כיתתי - פיילוט תנ\"ך")

# אווטאר דמות מורה אקראית (placeholder - נשנה מאוחר יותר)
st.image("https://www.seekpng.com/png/full/1010-10107796_person-icon-circle.png", caption="דמות מורה (אקראית לעת עתה)", width=100)

# תקצירים מעוררי סקרנות
teaser_a = "האם סוד גנוב יכול להפוך ניצחון להפסד? השבוע נחקור סיפור מקראי מותח מיהושע פרק ז', נגלה מסרים על ציות ועונש, ונדון איך זה קשור לחיים שלנו. מוכנים לחידה ראשונה? ענו נכון וקבלו כוכב!"
teaser_b = "דמיינו קרב בעיר ישנה, אבל סוד מקלקל הכל! השבוע נשמע סיפור פשוט מיהושע פרק ז' על חבר שלא ציית, ונראה מה קרה. נשחק חידה ונדבר על ציות. בואו נתחיל!"

st.header("תקציר מעורר סקרנות (בתוכנית השבועית)")
level = st.selectbox("בחר רמה לתלמיד:", ("רמה א' (כיתה ו')", "רמה ב' (כיתה ד')"))
if level == "רמה א' (כיתה ו')":
    st.write(teaser_a)
else:
    st.write(teaser_b)

# מערכי שיעור
st.header("מערך שיעור מוצע (יום ראשון, שעות 2+3)")
if level == "רמה א' (כיתה ו')":
    data = {
        'שעה': ['10:00', '10:05', '10:20', '10:35', '11:05', '11:25'],
        'משך זמן': ['5 דק\'', '15 דק\'', '15 דק\'', '30 דק\'', '20 דק\'', '5 דק\''],
        'חלק השיעור': ['פתיחת שיעור', 'קריאה בספר תנ"ך', 'הצגת מדיה', 'פעילויות', 'דיון וחידון', 'סיכום שיעור'],
        'מהלך השיעור': [
            'תקציר מושך + חידון: "נחשו מה קלקל את הקרב – כוכב למנצחים!"',
            'קריאת שרשרת פרק ז\' (1-15), ציר עלילתי: גניבת עכן, כישלון בעי. לפי הסיפור המקראי.',
            'תמונות עיר עתיקה (AI), מפת קרב, סרטון קצר על "אי ציות בהיסטוריה".',
            'כתיבה אישית: "כתבו על מקרה אי ציות – מה ההשלכות?" דיון: מידתיות עונש. קבוצתית: דנו בסיבות כישלון, כתבו מסקנה.',
            'דיון: "איך אי ציות משפיע על קבוצה?" חידון 3 שאלות בצ\'אט, כוכבים.',
            'חזרה על ציר, מסרים. עדכון מאגר (אישור מורה).'
        ],
        'הערות/הארות': [
            'עורר סקרנות, כוכבים דרך צ\'אט.',
            'דלג על פסוקים ארוכים.',
            'AI יוצר תמונות/מפות.',
            'חיבור יומיומי, כוכבים על השתתפות.',
            'בוט מציע שאלות ממאגר.',
            ''
        ]
    }
    df = pd.DataFrame(data)
    st.table(df)
else:
    data = {
        'שעה': ['10:00', '10:05', '10:15', '10:25', '10:45', '11:00'],
        'משך זמן': ['5 דק\'', '10 דק\'', '10 דק\'', '20 דק\'', '15 דק\'', '5 דק\''],
        'חלק השיעור': ['פתיחת שיעור', 'קריאה בספר תנ"ך', 'הצגת מדיה', 'פעילויות', 'דיון וחידון', 'סיכום שיעור'],
        'מהלך השיעור': [
            'תקציר פשוט + חידה: "מי לא ציית? כוכב למנצח!"',
            'קריאה קצרה (פסוקים 1-5, 10-12), סיפור פשוט: עכן גנב, קרב נכשל.',
            'תמונה אחת של עיר, מפה פשוטה, סרטון קצרצר על "ציות לחברים".',
            'כתיבה קצרה: "ציירו מה עכן עשה." דיון: "למה צריך לציית?" קבוצתית: דברו על חוק במשחק.',
            'שיחה קצרה: "מה קרה לעכן?" חידון 2 שאלות בצ\'אט.',
            'חזרה קצרה, עדכון מאגר.'
        ],
        'הערות/הארות': [
            'התמקד בסיפור בסיסי.',
            'שפה פשוטה.',
            'AI יוצר תמונה פשוטה.',
            'מסר יומיומי, כוכבים קלים.',
            'בוט משיב בפשטות.',
            ''
        ]
    }
    df = pd.DataFrame(data)
    st.table(df)

# צ'אט בוט פשוט (הרחבה ראשונית)
st.header("צ'אט בוט (דוגמה אינטראקטיבית)")
question = st.text_input("שאל שאלה על השיעור (למשל, 'מה קרה לעכן?'):")
if question:
    if "עכן" in question.lower():
        if level == "רמה א' (כיתה ו')":
            st.write("לפי הסיפור המקראי, עכן גנב והעונש היה חמור – מלמד על ציות בקבוצה. חידה: מה שמו של העמק? (תשובה נכונה = כוכב וירטואלי! ⭐)")
        else:
            st.write("עכן לא ציית וגנב, הקבוצה הפסידה. כמו לא לציית בבית ספר. חידה: מי גנב? (תשובה נכונה = כוכב וירטואלי! ⭐)")
    else:
        st.write("שאלה טובה! תשובה לדוגמה ממאגר: זה קשור לציות – רוצה פרטים נוספים? (הרחבה עתידית תשתמש במאגר אמיתי)")

# כפתור אישור מורה
st.header("אישור מערך (כמורה)")
if st.button("אשר ופרסם לתלמידים"):
    st.success("מערך אושר! עכשיו התלמידים רואים את התקציר והמערך המותאם. (בגרסה מלאה, זה ישלח התראה)")

# גיימיפיקציה ראשונית
st.header("גיימיפיקציה (דוגמה)")
st.write("כוכבים מצטברים: ⭐⭐⭐ (בגרסה מלאה, ייספרו אוטומטית על בסיס תשובות בצ'אט)"